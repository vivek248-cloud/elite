{% extends 'index/base.html' %}
{%load static %}

{% block title %}Get Free Construction Estimate in Trichy | Elite Dream Builders{% endblock %}
{% block description %}Request a free quote from Elite Dream Builders for your house or commercial construction project in Trichy.{% endblock %}
{% block keywords %}get a construction quote Trichy, free estimate house builders in Trichy, construction cost Trichy{% endblock %}


{% block content %}

<div class="sticky-header-bg">
<div class="sticky-header">
    <div class="outline-text4"><h1>Let's Build Your Dream Project</h1></div>
</div>
</div>

{% if messages %}
  <div class="alert-bg">
    {% for message in messages %}
      <div class="alert alert-success animation bounce" id="success-message">
        {{ message }}
      </div>
    {% endfor %}
  </div>
{% endif %}
  
<div class="get-box">
      <form method="post">
        {% csrf_token %}
        <div class="get-form animation zoom-in">
        <label for="id_name">Name:</label>
        {{ form.name }}
        
        <label for="id_email">Email:</label>
        {{ form.email }}
        
        <label for="id_number">Number:</label>
        {{ form.phone }}
        
        <label for="id_service_type">Service Type:</label>
        {{ form.service_type }}
        
        <label for="id_budget_range">Budget Range:</label>
            <select name="budget_range" id="id_budget_range">
              <option value="3">Gold</option>
            </select>

        
        <label for="area">Total Area (sq. ft):</label>
        <input type="number" id="area" name="area" placeholder="Enter area in sq. ft" oninput="calculateEstimate()">
        <input type="hidden" id="estimated_cost" name="estimated_cost">

        <p id="estimate">Estimated Cost: ₹0</p>

        <button type="submit">Get Quote</button>
        </div>
    </form>
    


    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.0/js/bootstrap.bundle.min.js"></script>
    <script src={% static "js/elite.js" %}></script>
    {% block extra_js %}
    <script>
      function isInViewport(element) {
        const rect = element.getBoundingClientRect();
        return (
            rect.top < window.innerHeight && rect.bottom > 0 &&
            rect.left < window.innerWidth && rect.right > 0
        );
    }
    
    function animateOnScroll() {
        const elements = document.querySelectorAll('.animation');
        elements.forEach(element => {
            if (isInViewport(element) && !element.classList.contains('show')) {
                element.classList.add('show');
                element.getBoundingClientRect(); // Force repaint
            }
        });
    }
    
    function optimizedScroll() {
        requestAnimationFrame(animateOnScroll);
    }
    
    document.addEventListener('DOMContentLoaded', animateOnScroll);
    window.addEventListener('scroll', optimizedScroll);

    window.onscroll = function() {stickyEffect()};

let header = document.querySelector(".sticky-header");
let sticky = header.offsetTop;

function stickyEffect() {
  if (window.scrollY > sticky) {
    header.classList.add("sticky-active");
  } else {
    header.classList.remove("sticky-active");
  }
}


window.addEventListener("load", function () {
  document.getElementById("loader").style.display = "none";
});

setTimeout(() => {
  document.getElementById("loader").style.display = "none";
}, 3000); // Hides loader after 5 seconds    


function calculateEstimate() {
  let area = document.getElementById("area").value;

  // Get the selected budget range (ID)
  let budgetDropdown = document.getElementById("id_budget_range");
  
  if (!budgetDropdown) {
      console.error("Budget range dropdown not found!");
      return;
  }

  let selectedBudgetId = budgetDropdown.value;

  // Define rates based on the correct ID from BudgetRange
  let ratePerSqFt = 2099;  // Default medium budget

  if (selectedBudgetId == "1") {  // Silver
      ratePerSqFt = 2099;
  } else if (selectedBudgetId == "3") {  // Gold
      ratePerSqFt = 2199;
  } else if (selectedBudgetId == "2") {  // Platinum
      ratePerSqFt = 2499;
  }

  let estimate = area * ratePerSqFt;

  if (!isNaN(estimate) && area > 0) {
      document.getElementById("estimate").innerHTML = `Estimated Cost: ₹${estimate.toLocaleString('en-IN')}`;
      document.getElementById("estimated_cost").value = estimate;  // Store in hidden input
  } else {
      document.getElementById("estimate").innerHTML = "Estimated Cost: ₹0";
      document.getElementById("estimated_cost").value = 0;
  }
}

setTimeout(() => {
  const msg = document.getElementById("success-message");
  if (msg) {
    msg.style.display = "none";
  }
}, 5000); // hide after 5 seconds



  </script>
{% endblock %}

  {% endblock %}
