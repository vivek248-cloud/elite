{% extends 'index/base.html' %}
{%load static %}

{% block title %}Get Free Construction Estimate in Trichy | Elite Dream Builders{% endblock %}
{% block description %}Request a free quote from Elite Dream Builders for your house or commercial construction project in Trichy.{% endblock %}
{% block keywords %}get a construction quote Trichy, free estimate house builders in Trichy, construction cost Trichy{% endblock %}


{% block content %}

<div class="sticky-header-bg">
<div class="sticky-header">
    <div class="outline-text4"><h1>Let's Build Your Dream Project</h1></div>
</div>
</div>

{% if messages %}
  <div class="alert-bg">
    {% for message in messages %}
      <div class="alert alert-success animation bounce" id="success-message">
        {{ message }}
      </div>
    {% endfor %}
  </div>
{% endif %}




    <section class="py-20 md:py-32 px-4 overflow-hidden">
        <div class="max-w-7xl mx-auto">
            <!-- Header -->
            <div class="text-center mb-16 md:mb-24">
                <h2 class="section-title">
                    How We <span class="text-gradient-gold">Work</span>
                </h2>
                <p class="text-lg md:text-xl text-muted-foreground max-w-2xl mx-auto leading-relaxed">
                    A seamless journey from vision to reality, guided by expertise and dedication
                </p>
            </div>

            <!-- Process Steps Grid -->
            <div class="relative">
                <!-- Connecting SVG Path - Desktop -->
                <svg 
                    class="hidden lg:block absolute inset-0 w-full h-full pointer-events-none"
                    viewBox="0 0 1200 800"
                    preserveAspectRatio="xMidYMid meet"
                >
                    <defs>
                        <linearGradient id="lineGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" stop-color="hsl(222, 47%, 20%)" stop-opacity="0.1" />
                            <stop offset="50%" stop-color="hsl(222, 47%, 20%)" stop-opacity="0.3" />
                            <stop offset="100%" stop-color="hsl(222, 47%, 20%)" stop-opacity="0.1" />
                        </linearGradient>
                    </defs>
                    <path
                        d="M 180 130 
                           C 280 130, 320 130, 420 130
                           C 520 130, 560 130, 660 130
                           C 760 130, 800 130, 900 130
                           L 1020 130
                           C 1080 130, 1100 180, 1100 240
                           L 1100 320
                           C 1100 380, 1080 400, 1020 400
                           L 180 400
                           C 120 400, 100 450, 100 500
                           L 100 580
                           C 100 640, 120 660, 180 660
                           L 660 660"
                        fill="none"
                        stroke="url(#lineGradient)"
                        stroke-width="3"
                        stroke-dasharray="8 4"
                        class="animate-pulse"
                    />
                </svg>

                <!-- Row 1 - 3 items -->
                <div id="step-row-1" class="flex flex-wrap justify-center gap-6 md:gap-10 lg:gap-16 mb-8 md:mb-16">
                    <!-- This div should be EMPTY. JavaScript will insert the steps here. -->
                </div>

                <!-- Row 2 - 3 items -->
                <div id="step-row-2" class="flex flex-wrap justify-center gap-6 md:gap-10 lg:gap-16 mb-8 md:mb-16">
                    <!-- This div should be EMPTY. JavaScript will insert the steps here. -->
                </div>

                <!-- Row 3 - 3 items -->
                <div id="step-row-3" class="flex flex-wrap justify-center gap-6 md:gap-10 lg:gap-16">
                    <!-- This div should be EMPTY. JavaScript will insert the steps here. -->
                </div>
            </div>




            <!-- CTA -->
            <div class="text-center mt-16 md:mt-24">
                <a class="start-journey-btn px-8 py-4   rounded-full " href="{% url 'get_quote' %}#get_quote">
                    Start Your Journey
                </a>
            </div>
        </div>
    </section>


<div class="quote-container" id="get_quote">
  <div class="quote-wrapper">

    <!-- Header -->
    <div class="quote-header">
      <h2 class="section-title">Get Your Custom Quote</h2>
      <p>Fill in the details below and receive an accurate estimate instantly.</p>
    </div>

    <!-- Card -->
    <div class="quote-card">
      <form method="post">
        {% csrf_token %}

        <div class="field">
          <label for="id_name">Full Name</label>
          {{ form.name }}
        </div>

        <div class="field">
          <label for="id_email">Email Address</label>
          {{ form.email }}
        </div>

        <div class="field">
          <label for="id_number">Phone Number</label>
          {{ form.phone }}
        </div>

        <div class="field">
          <label for="id_service_type">Service Type</label>
          {{ form.service_type }}
        </div>

        <!-- Budget -->
        <div class="field">
          <label>Budget Range</label>

          <div class="budget-cards">
            <label class="budget-card">
              <input type="radio" name="budget_radio" value="1" checked>
              <span class="title">Silver</span>
              <span class="desc">Essential elegance</span>
            </label>

            <label class="budget-card">
              <input type="radio" name="budget_radio" value="3">
              <span class="title">Gold</span>
              <span class="desc">Premium finish</span>
            </label>

            <label class="budget-card">
              <input type="radio" name="budget_radio" value="2">
              <span class="title">Platinum</span>
              <span class="desc">Luxury experience</span>
            </label>
          </div>

          <!-- keep existing select hidden for backend compatibility -->
          <select id="id_budget_range" name="budget_range" hidden>
            <option value="1">Silver</option>
            <option value="3">Gold</option>
            <option value="2">Platinum</option>
          </select>
        </div>

        <div class="field">
          <label for="area">Total Area (sq. ft)</label>
          <input type="number" id="area" name="area" placeholder="Enter area">
        </div>

        <!-- Estimate -->
        <div class="estimate-box">
          <small>ESTIMATED COST</small>
          <h2 id="estimate">â‚¹0</h2>
          <p class="estimate-note">
            Based on selected area & budget
          </p>
        </div>

        <input type="hidden" id="estimated_cost" name="estimated_cost">

        <button class="quote-btn" type="submit">
          Get Quote â†’
        </button>
      </form>
    </div>

    <p class="footer-note">
      *This is an estimated quote. Final pricing may vary based on requirements.
    </p>
  </div>
</div>






    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.0/js/bootstrap.bundle.min.js"></script>
    <script src={% static "js/elite.js" %}></script>
    {% block extra_js %}

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const steps = [
        {
            iconSvg: `<i class="bi bi-geo-alt"></i>`,
            title: "Site Visit",
            description: "Schedule a visit to assess your project requirements firsthand",
        },
        {
            iconSvg: `<i class="bi bi-calculator"></i>`,
            title: "Cost Estimation",
            description: "Receive a detailed and transparent cost estimate tailored to you",
        },
        {
            iconSvg: `<i class="bi bi-cash-stack"></i>`,
            title: "Token Advance",
            description: "Secure your project with a nominal token advance payment",
        },
        {
            iconSvg: `<i class="bi bi-droplet-half"></i>`,
            title: "Soil Test",
            description: "Ensure stability and longevity with a thorough soil analysis",
        },
        {
            iconSvg: `<i class="bi bi-file-earmark-check"></i>`,
            title: "Plan Approval",
            description: "We handle the government paperwork and approval process",
        },
        {
            iconSvg: `<i class="bi bi-pencil-square"></i>`,
            title: "Plan Design",
            description: "Our designers create a customized plan for your dream home",
        },
        {
            iconSvg: `<i class="bi bi-building"></i>`,
            title: "Structural Work",
            description: "Expert construction design for every aspect of your project",
        },
        {
            iconSvg: `<i class="bi bi-check2"></i>`,
            title: "Agreements",
            description: "Formalize our commitment through clear agreements",
        },
        {
            iconSvg: `<i class="bi bi-stars"></i>`,
            title: "Bhoomi Pooja",
            description: "Begin your project with traditional blessings and ceremonies",
        },
    ];

    const stepRows = [
        document.getElementById('step-row-1'),
        document.getElementById('step-row-2'),
        document.getElementById('step-row-3')
    ];

    // Function to create an HTML string for a ProcessStep
    function createProcessStepElement(step, stepNumber, delayMs) {
        return `
            <div 
                class="process-step-wrapper"
                style="animation-delay: ${delayMs}ms;"
            >
                <div class="process-step-card">
                    <span class="process-step-number">
                        ${stepNumber}
                    </span>
                    
                    <div class="process-step-icon-container">
                        ${step.iconSvg}
                    </div>
                    
                    <h3 class="process-step-title">
                        ${step.title}
                    </h3>
                    
                    <p class="process-step-description">
                        ${step.description}
                    </p>
                </div>

                <div class="process-step-decorative-ring"></div>
            </div>
        `;
    }

let allStepElements = [];

// ðŸ”’ Clear existing content first
stepRows.forEach(row => {
    row.innerHTML = '';
});
steps.forEach((step, index) => {
    const row = Math.floor(index / 3);
    const delay = index * 100;

    if (stepRows[row]) {
        const stepHtml = createProcessStepElement(step, index + 1, delay);
        const tempDiv = document.createElement('div');
        tempDiv.innerHTML = stepHtml.trim();
        const stepElement = tempDiv.firstElementChild;

        stepRows[row].appendChild(stepElement);
        allStepElements.push(stepElement);
    }
});

    // Intersection Observer for fade-in animation
    const observer = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('is-visible');
                observer.unobserve(entry.target); // Stop observing once animated
            }
        });
    }, {
        root: null, // viewport
        rootMargin: '0px',
        threshold: 0.1 // Trigger when 10% of the item is visible
    });

    allStepElements.forEach(stepElement => {
        observer.observe(stepElement);
    });
});
</script>


    <script>
    document.addEventListener("DOMContentLoaded", function () {

      const areaInput = document.getElementById("area");
      const estimateEl = document.getElementById("estimate");
      const hiddenBudget = document.getElementById("id_budget_range");
      const radios = document.querySelectorAll('input[name="budget_radio"]');

      const rates = {
        "1": 2099, // Silver
        "3": 2199, // Gold
        "2": 2499  // Platinum
      };

      function calculateEstimate() {
        const area = parseFloat(areaInput.value) || 0;
        const budgetId = hiddenBudget.value;
        const rate = rates[budgetId] || 0;

        const total = area * rate;

        estimateEl.textContent = "â‚¹" + total.toLocaleString("en-IN");
      }

      // ðŸ”¹ Radio click â†’ update hidden select + UI
      radios.forEach(radio => {
        radio.addEventListener("change", function () {

          // update hidden select
          hiddenBudget.value = this.value;

          // active UI
          document.querySelectorAll(".budget-card").forEach(c => c.classList.remove("active"));
          this.closest(".budget-card").classList.add("active");

          calculateEstimate();
        });
      });

      // ðŸ”¹ Area typing
      areaInput.addEventListener("input", calculateEstimate);

      // ðŸ”¹ Initial calculation
      calculateEstimate();

    });
    </script>


    <script>
      function isInViewport(element) {
        const rect = element.getBoundingClientRect();
        return (
            rect.top < window.innerHeight && rect.bottom > 0 &&
            rect.left < window.innerWidth && rect.right > 0
        );
    }
    
    function animateOnScroll() {
        const elements = document.querySelectorAll('.animation');
        elements.forEach(element => {
            if (isInViewport(element) && !element.classList.contains('show')) {
                element.classList.add('show');
                element.getBoundingClientRect(); // Force repaint
            }
        });
    }
    
    function optimizedScroll() {
        requestAnimationFrame(animateOnScroll);
    }
    
    document.addEventListener('DOMContentLoaded', animateOnScroll);
    window.addEventListener('scroll', optimizedScroll);

    window.onscroll = function() {stickyEffect()};

let header = document.querySelector(".sticky-header");
let sticky = header.offsetTop;

function stickyEffect() {
  if (window.scrollY > sticky) {
    header.classList.add("sticky-active");
  } else {
    header.classList.remove("sticky-active");
  }
}


window.addEventListener("load", function () {
  document.getElementById("loader").style.display = "none";
});

setTimeout(() => {
  document.getElementById("loader").style.display = "none";
}, 3000); // Hides loader after 5 seconds    


setTimeout(() => {
  const msg = document.getElementById("success-message");
  if (msg) {
    msg.style.display = "none";
  }
}, 5000); // hide after 5 seconds



  </script>
{% endblock %}

  {% endblock %}
